<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Calendario motivazionale</title>

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#020617" />

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="apple-touch-icon" href="icon-512.png" />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-shell">

    <section id="screen-home" class="screen">
      <header class="app-header">
        <h1 id="home-h1">Calendario motivazionale</h1>
        <p id="home-p">Cardio, allenamenti, dieta e peso — tutto in un unico posto.</p>
      </header>

      <section class="card hero">
        <div class="hero-bg" id="hero-bg"></div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
          <div class="hero-title" id="hero-title">Disciplina</div>
          <div class="hero-subtitle" id="hero-subtitle">Un giorno alla volta.</div>
        </div>
      </section>

      <div class="stack">
        <button id="btn-open-calendar" class="btn btn-primary">Apri calendario</button>
        <button id="btn-open-setup" class="btn btn-secondary">Impostazioni</button>
      </div>

      <p class="footnote">I dati vengono salvati sul dispositivo.</p>
    </section>

    <section id="screen-setup" class="screen hidden">
      <header class="topbar">
        <button class="icon-btn" id="btn-setup-back" aria-label="Indietro">←</button>
        <div class="topbar-title">Configurazione</div>
        <div class="topbar-spacer"></div>
      </header>

      <section class="card">
        <h2>Pagina iniziale</h2>
        <div class="field">
          <label class="label">Immagine (opzionale)</label>
          <input type="file" id="welcome-image-input" accept="image/*" />
          <div class="hint">L’immagine viene salvata sul dispositivo.</div>
        </div>
        <div class="field">
          <label class="label">Titolo</label>
          <input type="text" id="welcome-title-input" placeholder="Es. Disciplina > motivazione" />
        </div>
        <div class="field">
          <label class="label">Testo</label>
          <textarea id="welcome-text-input" placeholder="Scrivi qui la tua frase motivazionale…"></textarea>
        </div>
      </section>

      <section class="card">
        <h2>Allenamenti</h2>
        <div class="grid-2">
          <div class="field">
            <label class="label">Allenamenti settimanali</label>
            <input type="number" id="workouts-per-week" min="1" max="14" step="1" />
          </div>
          <div class="field">
            <label class="label">Nome riposo</label>
            <input type="text" id="rest-label" placeholder="Es. Rest / Riposo" />
          </div>
        </div>

        <div class="field">
          <label class="label">Tipologie allenamento</label>
          <div id="workout-types-list" class="chips"></div>
          <div class="row">
            <input type="text" id="workout-type-new" placeholder="Aggiungi (es. Push)" />
            <button id="btn-add-workout-type" class="btn btn-tertiary btn-compact" type="button">Aggiungi</button>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Dati corporei</h2>
        <div class="grid-2">
          <div class="field">
            <label class="label">Altezza (cm)</label>
            <input type="number" id="height-cm" min="50" max="260" step="1" />
          </div>
          <div class="field">
            <label class="label">BMI (auto)</label>
            <input type="text" id="bmi-output" disabled />
          </div>
        </div>

        <div class="grid-2">
          <div class="field">
            <label class="label">Peso di partenza (kg)</label>
            <input type="number" id="start-weight-input" step="0.1" />
          </div>
          <div class="field">
            <label class="label">Peso obiettivo (kg)</label>
            <input type="number" id="goal-weight-input" step="0.1" />
          </div>
        </div>

        <div class="metric">
          <div class="metric-row">
            <span>Avanzamento obiettivo</span>
            <span id="weight-progress-percent" class="accent">0%</span>
          </div>
          <div class="progress"><div id="weight-progress-bar" class="progress-fill"></div></div>
        </div>
      </section>

      <div class="stack">
        <button id="btn-save-setup" class="btn btn-primary">Salva</button>
      </div>
    </section>

    <section id="screen-main" class="screen hidden">
      <header class="topbar">
        <button class="icon-btn" id="btn-main-back" aria-label="Home">←</button>
        <div class="topbar-title">Calendario</div>
        <button class="icon-btn" id="btn-main-setup" aria-label="Impostazioni">⚙︎</button>
      </header>

      <section class="card">
        <h2>Giorno</h2>

        <div class="day-nav">
          <button id="prev-day-btn" class="icon-pill" aria-label="Giorno precedente">←</button>

          <div class="day-center">
            <div id="current-day-label" class="day-week">–</div>
            <input type="date" id="current-date-input" class="day-date" />
          </div>

          <button id="next-day-btn" class="icon-pill" aria-label="Giorno successivo">→</button>
        </div>

        <button id="today-btn" class="btn btn-secondary btn-compact">Oggi</button>

        <div class="field">
          <label class="checkline">
            <input type="checkbox" id="cardio-checkbox" />
            <span>Cardio completato</span>
          </label>

          <div id="cardio-duration-wrap" class="seg-wrap hidden">
            <div class="seg-label">Durata</div>
            <div class="seg">
              <button type="button" class="seg-btn active" data-min="60">60'</button>
              <button type="button" class="seg-btn" data-min="30">30'</button>
            </div>
          </div>

          <div class="hint">Motivo se NON hai fatto il cardio</div>
          <select id="cardio-reason-select">
            <option value="">— Seleziona un motivo —</option>
            <option value="tempo">Mancanza di tempo</option>
            <option value="stanchezza">Stanchezza</option>
            <option value="salute">Problemi di salute</option>
            <option value="lavoro">Impegni di lavoro</option>
            <option value="viaggio">Viaggio / spostamenti</option>
            <option value="altro">Altro</option>
          </select>
        </div>

        <div class="field">
          <label class="label">Allenamento</label>
          <select id="workout-select"></select>
          <div class="hint">Motivo se NON ti sei allenato</div>
          <select id="workout-reason-select">
            <option value="">— Seleziona un motivo —</option>
            <option value="tempo">Mancanza di tempo</option>
            <option value="stanchezza">Stanchezza</option>
            <option value="salute">Problemi di salute</option>
            <option value="lavoro">Impegni di lavoro</option>
            <option value="viaggio">Viaggio / spostamenti</option>
            <option value="altro">Altro</option>
          </select>
        </div>

        <div class="field">
          <label class="checkline">
            <input type="checkbox" id="diet-checkbox" />
            <span>Aderenza piano alimentare</span>
          </label>
          <div class="hint">Motivo se NON hai rispettato il piano</div>
          <select id="diet-reason-select">
            <option value="">— Seleziona un motivo —</option>
            <option value="tempo">Mancanza di tempo</option>
            <option value="stanchezza">Stanchezza</option>
            <option value="salute">Problemi di salute</option>
            <option value="lavoro">Impegni di lavoro</option>
            <option value="viaggio">Viaggio / spostamenti</option>
            <option value="altro">Altro</option>
          </select>
        </div>

        <div class="field">
          <label class="label">Peso di oggi (kg)</label>
          <input type="number" id="weight-input" step="0.1" inputmode="decimal" placeholder="Es. 82.4" />
          <div class="metric-row">
            <span>Avanzamento obiettivo</span>
            <span id="weight-progress-percent-main" class="accent">0%</span>
          </div>
          <div class="progress"><div id="weight-progress-bar-main" class="progress-fill"></div></div>
        </div>

        <div class="field">
          <label class="label">Note</label>
          <textarea id="notes-textarea" placeholder="Eventuali note della giornata"></textarea>
        </div>

        <div id="day-complete-badge" class="badge hidden">
          <span class="badge-dot">✓</span>
          <span>Giornata completata.</span>
        </div>
      </section>

      <section class="card">
        <div class="stats-head">
          <h2>Statistiche</h2>
          <button id="btn-open-range" class="btn btn-tertiary btn-compact">Intervallo personalizzato</button>
        </div>

        <div class="tabs">
          <button class="tab active" data-mode="week">Settimana</button>
          <button class="tab" data-mode="month">Mese</button>
          <button class="tab" data-mode="year">Anno</button>
        </div>

        <p id="stats-mode-label" class="muted center">Settimana corrente</p>

        <div class="stat">
          <div class="stat-row">
            <span>Cardio</span>
            <span id="stats-cardio-value" class="strong">0 / 0</span>
            <span id="stats-cardio-percent" class="accent">0%</span>
          </div>
          <div class="progress"><div id="stats-cardio-progress" class="progress-fill"></div></div>
        </div>

        <div class="stat">
          <div class="stat-row">
            <span>Allenamenti</span>
            <span id="stats-gym-value" class="strong">0 / 0</span>
            <span id="stats-gym-percent" class="accent">0%</span>
          </div>
          <div class="progress"><div id="stats-gym-progress" class="progress-fill"></div></div>
        </div>

        <div class="stat">
          <div class="stat-row">
            <span>Dieta</span>
            <span id="stats-diet-value" class="strong">0 / 0</span>
            <span id="stats-diet-percent" class="accent">0%</span>
          </div>
          <div class="progress"><div id="stats-diet-progress" class="progress-fill"></div></div>
        </div>

        <h3>Mancato rispetto</h3>
        <div class="mini">
          <div class="mini-row"><span>Cardio</span><span id="stats-cardio-missed-total" class="strong">0</span></div>
          <div class="mini-row"><span>Allenamenti</span><span id="stats-gym-missed-total" class="strong">0</span></div>
          <div class="mini-row"><span>Dieta</span><span id="stats-diet-missed-total" class="strong">0</span></div>
        </div>

        <div id="stats-reasons-list" class="reasons"></div>
      </section>

      <p class="footnote">Notifiche: su iOS funzionano solo con l’app aperta (limitazione del browser).</p>
    </section>

    <div id="range-backdrop" class="sheet-backdrop hidden" aria-hidden="true"></div>
    <section id="range-sheet" class="sheet hidden" role="dialog" aria-modal="true" aria-label="Intervallo personalizzato">
      <div class="sheet-handle"></div>
      <header class="sheet-head">
        <div class="sheet-title">Intervallo personalizzato</div>
        <button id="btn-close-range" class="icon-btn" aria-label="Chiudi">×</button>
      </header>

      <div class="sheet-body">
        <div class="range-grid">
          <div class="field">
            <label class="label">Dal</label>
            <input type="date" id="range-start" />
          </div>
          <div class="field">
            <label class="label">Al</label>
            <input type="date" id="range-end" />
          </div>
        </div>

        <button id="range-calc-btn" class="btn btn-primary">Calcola statistiche</button>

        <div class="mini big">
          <div class="mini-row"><span>Cardio</span><span id="range-cardio-count" class="strong">0</span></div>
          <div class="mini-row"><span>Allenamenti</span><span id="range-gym-count" class="strong">0</span></div>
          <div class="mini-row"><span>Dieta</span><span id="range-diet-count" class="strong">0</span></div>
        </div>
      </div>
    </section>

  </div>

  <script src="script.js"></script>
</body>
</html>
